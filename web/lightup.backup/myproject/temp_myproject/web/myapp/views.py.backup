import random

from django.shortcuts import render

# from django.http import HttpResponse

# Create your views here.

def guess(request):
    cka = []
    ckb = []
    ans = []
    res = []
    if "answer" not in request.session:
        ns = []
        while len(ns) < 4:
            n = random.randint(1, 9)
            if n not in ns:
               ns.append(n)
        request.session["answer"] = "".join(str(n) for n in ns)
    ks = request.session["answer"]
    bs = request.GET.get("number","0000").strip()
    res.append(bs)
    if ks == bs:
        check = "成功, GAMEOVER"
        del request.session["answer"]

    for ck in ks:
        for cb in bs:
            if cb == ck:
               ckb.append(cb)

    for i in range(4):
        if ks[i] == bs[i]:
            cka.append(ks[i])

    A = len(cka)
    B = len(ckb) - len(cka)
    ans.append(f'{A}A{B}B')
    ans.pop(0)
    res.pop(0)
    pairs = zip(res,ans)
    return render(request,"myapp/guess.html",locals())


def practice01(request,id):
    return render(request,"myapp/practice01.html",{"id":id})


def countbmi(request):
    h = request.GET.get("h", "165").strip()
    w = request.GET.get("w", "65").strip()
    h = int(h)
    w = int(w)
    bmi = w / ((h / 100) * (h / 100))

    return render(request, "myapp/countbmi.html", {"h": h, "w": w, "bmi": bmi})


def countsqare(request):
    h = request.GET.get("k", "1").strip()
    h = int(h)
    rs = h * h
    return render(request, "myapp/square.html", {"rs": rs, "h": h})


def lotto(request):
    name = "lotto"
    return render(request, "myapp/lotto.html", {"k": name})


def luckyNumber(request):
    k = []
    s = []
    while len(k) < 7:
        x = random.randint(1, 42)
        s.append(x)
        if x not in k:
            k.append(x)
    return render(request, "myapp/showout.html", {"all": s, "lucky": k})
